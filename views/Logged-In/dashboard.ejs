<%- include("../partials/dbBoiler.ejs") %>

<%- include("../partials/navbar.ejs") %>

<%- include("../partials/sidebar", { currentPage: "dashboard" }) %>

<!-- Content Wrapper -->
<div id="content-wrapper" class="d-flex flex-column">

    <!-- Main Content -->
    <div id="content">

        

        <!-- Begin Page Content -->
        <div class="container-fluid">

            <!-- Page Heading -->
            <div class="d-sm-flex align-items-center justify-content-between mb-4">
                
                <img height="70px" width="300px" src="../images/dashboard-logo.png.png" alt="KeepUp logo">
            </div>

            <%- include("../partials/table.ejs") %>

            <!-- jQuery -->
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
<!-- DataTables JavaScript -->
<script src="https://cdn.datatables.net/1.11.6/js/jquery.dataTables.min.js"></script>

<script>
    $(document).ready(function() {
    var dataTable = $('#dataTable').DataTable({
        "order": [[0, "asc"]] // Sort by Close-out Start Date column (index 4) in descending order
    });

    // Add an event listener to the search input field
    $('#dataTable_filter input').on('keyup', function () {
        var searchText = $(this).val().trim();
        if (searchText !== '') {
            // Escape special characters in the search text
            var escapedSearchText = searchText.replace(/[-\/\\^$*+?.()|[\]{}]/g, '\\$&');
            // Create a regular expression for partial match at the beginning of the word
            var regex = '\\b' + escapedSearchText;
            dataTable.search(regex, true, false).draw();
        } else {
            // If the search input is empty, reset the table search
            dataTable.search('').draw();
        }
    });
});
</script>

</div>
<!-- /.container-fluid -->

</div>
<!-- End of Main Content -->

<%- include("../partials/footer.ejs") %>

</div>
<!-- End of Content Wrapper -->

</div>
<!-- End of Page Wrapper -->

<!-- Scroll to Top Button-->
<a class="scroll-to-top rounded" href="#page-top">
<i class="fas fa-angle-up"></i>
</a>

<!-- Logout Modal-->
<div class="modal fade" id="logoutModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel"
aria-hidden="true">
<div class="modal-dialog" role="document">
<div class="modal-content">
<div class="modal-header">
<h5 class="modal-title" id="exampleModalLabel">Ready to Leave?</h5>
<button class="close" type="button" data-dismiss="modal" aria-label="Close">
<span aria-hidden="true">Ã—</span>
</button>
</div>
<div class="modal-body">Select "Logout" below if you are ready to end your current session.</div>
<div class="modal-footer">
<button class="btn btn-secondary" type="button" data-dismiss="modal">Cancel</button>
<a class="btn btn-primary" href="/welcome">Logout</a>
</div>
</div>
</div>
</div>

<!--JS for Sidebar Logo-->
<script>
document.addEventListener("DOMContentLoaded", function() {
const sidebarToggle = document.getElementById("sidebarToggle");
const sidebarOpenImage = document.getElementById("sidebarOpenImage");
const sidebarCollapsedImage = document.getElementById("sidebarCollapsedImage");

// Add event listener to the sidebar toggle button
sidebarToggle.addEventListener("click", function() {
// Check if the sidebar is collapsed
const sidebarCollapsed = document.body.classList.contains("sidebar-toggled");

// Toggle visibility of logos based on sidebar state
if (sidebarCollapsed) {
    // Sidebar is collapsed, hide sidebarOpenImage and show sidebarCollapsedImage
    sidebarOpenImage.style.display = "none";
    sidebarCollapsedImage.style.display = "block";
} else {
    // Sidebar is expanded, hide sidebarCollapsedImage and show sidebarOpenImage
    sidebarOpenImage.style.display = "block";
    sidebarCollapsedImage.style.display = "none";
}
});
});
</script>

<!--Sidebar responsive-->
<script>
document.addEventListener("DOMContentLoaded", function() {
const sidebarToggle = document.getElementById("sidebarToggle");
const responsiveContent = document.getElementById("responsive-content");

sidebarToggle.addEventListener("click", function() {
    document.body.classList.toggle("sidebar-collapsed");
});
});
</script>

<!-- Bootstrap core JavaScript-->
<script src="../vendor/jquery/jquery.min.js"></script>
<script src="../vendor/bootstrap/js/bootstrap.bundle.min.js"></script>

<!-- Core plugin JavaScript-->
<script src="../vendor/jquery-easing/jquery.easing.min.js"></script>

<!-- Custom scripts for all pages-->
<!-- <script src="../js/sb-admin-2.min.js"></script> -->

<!-- Page level plugins -->
<script src="../vendor/datatables/jquery.dataTables.min.js"></script>
<script src="../vendor/datatables/dataTables.bootstrap4.min.js"></script>

<!-- Page level custom scripts -->
<script src="../js/demo/datatables-demo.js"></script>


</body>

</html>