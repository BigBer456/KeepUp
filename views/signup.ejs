<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <link rel="shortcut icon" type="x-icon" href="./images/logo_arrow.png.png">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!--Document Title-->
    <title>Sign Up Sheet</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <link href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css" rel="stylesheet">
  </head>
  <body>
    <!--Top Navbar-->
    <header data-bs-theme="dark">
      <nav class="navbar navbar-expand-md navbar-dark fixed-top bg-dark">
        <div class="container-fluid">
          <img src="../images/logo_white_nb2.png.png" style="max-height: 5rem; max-width: 10rem;" alt="logo">
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
          </button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav me-auto mb-2 mb-md-0">
              <li class="nav-item">
                <a class="nav-link active" aria-current="page" href="#"></a>
              </li>
              <li class="nav-item">
                <a class="nav-link" href="#"></a>
              </li>
              <li class="nav-item">
                <a class="nav-link disabled" aria-disabled="true"></a>
              </li>
            </ul>
              <a href="/"><button type="button" class="btn btn-primary me-3">Back</button></a>
          </div>
        </div>
      </nav>
    </header>

    <br><br>

    <br><br>
    
    <!--Sign Up Form-->
    <div class="container mt-3 bg-light">
      <div class="row">
        <!-- Left div -->
        <div class="col-md-6 mt-5" >
          <form action="/signup" method="POST" id="myForm">
            <div class="mb-3">
              <label for="fName" class="form-label">First Name <span id="fNameErr" style="color: red; display: none;">Please fill out this field</span></label>
              <input type="text" class="form-control" id="fName" name="fName">
            </div>
            <div class="mb-3">
              <label for="lName" class="form-label">Last Name <span id="lNameErr" style="color: red; display: none;">Please fill out this field</span></label>
              <input type="text" class="form-control" id="lName" name="lName">
            </div>
            <div class="mb-3">
              <label for="email" class="form-label">Email address <span id="emailErr" style="color: red; display: none;">Please give valid email</span></label>
              <input type="email" class="form-control" id="email" aria-describedby="emailHelp" name="email">
            </div>

            <!--Password Policy-->
            <div class="mb-3">
              <label for="password">Enter Password:</label>
              <div class="input-group">
                <input type="password" class="form-control" id="password" oninput="validatePassword(this.value, document.getElementById('confirmPassword').value)" name="password">
                <div class="input-group-append">
                  <button class="btn btn-outline-secondary" type="button" id="togglePassword">
                    <i class="fas fa-eye"></i>
                  </button>
                </div>
              </div>
            </div>
            <div class="form-group">
              <ul>
                <li id="minLength">
                  <i class="fas fa-times text-danger"></i>
                  Minimum 8 characters
                </li>
                <li id="uppercase">
                  <i class="fas fa-times text-danger"></i>
                  At least one uppercase letter
                </li>
                <li id="lowercase">
                  <i class="fas fa-times text-danger"></i>
                  At least one lowercase letter
                </li>
                <li id="symbol">
                  <i class="fas fa-times text-danger"></i> 
                  At least one symbol (@$!%*?&)
                </li>
                <li id="match">
                  <i class="fas fa-times text-danger"></i> 
                  Match with Confirm Password
                </li>
              </ul>
            </div>
            <span id="errorMessage" class="font-weight-bold text-danger"></span>
            <div class="mb-3">
              <label for="exampleInputPassword2" class="form-label">Confirm Password</label>
              <div class="input-group">
                <input type="password" class="form-control" id="confirmPassword" oninput="validatePassword(document.getElementById('password').value, this.value)" name="confirmPassword">
                <div class="input-group-append">
                  <button class="btn btn-outline-secondary"
                    type="button" id="toggleConfirmPassword">
                    <i class="fas fa-eye"></i>
                  </button>
                </div>
              </div>
            </div>
            <div class="mb-3">
              <label for="CompCode" class="form-label">Company Code <span id="CompCodeErr" style="color: red; display: none;">Please fill out this field</span></label>
              <input type="text" class="form-control" id="CompCode" name="CompCode">
              <div id="emailHelp" class="form-text">
                Don't have a Company Code? Click <a href="/getquote">here</a>
              </div>
            </div>
            <button type="submit" class="btn btn-primary" id="submitButton">Submit</button><span id="PassErr" style="color: red; display: none;">Please Give Strong Password</span>
          </form>

          <br></br>
        </div>
    
        <!-- Right div -->
        <div class="col-md-6 mt-3">
          <div class="p-3 bg-light">
            <img style="height: 10rem; width: 30rem;" src="../images/logo_black_nb.png.png" alt="">
            <div class="mt-5">
              <h4>Sign up with KeepUp</h4>
              <p>Fill out the following to create your account with KeepUp. If you do not have a company code, please click the link located underneath the Company Code prompt. If you have any other questions regarding the sign up, please visit out FAQs which can be found on our home page.</p>
            </div>    
          </div>
        </div>
      </div>
    </div>

    <br></br>

    <!--Footer-->
    <div class="container">
      <footer class="d-flex flex-wrap justify-content-between align-items-center my-4 border-top">
        <p class="col-md-4 mb-0 text-body-secondary">Â©KeepUp 2024</p>
        <a href="/" class="col-md-4 d-flex align-items-center justify-content-center mb-3 mb-md-0 me-md-auto link-body-emphasis text-decoration-none">
            <img class="bi me-2" width="80" height="50" src="../images/logo_arrow.png.png" alt="Arrow logo">
        </a>
      
        <ul class="nav col-md-4 justify-content-end">
          <li class="nav-item"><a href="/" class="nav-link px-2 text-body-secondary">Home</a></li>
          <li class="nav-item"><a href="#" class="nav-link px-2 text-body-secondary">FAQs</a></li>
          <li class="nav-item"><a href="/getquote" class="nav-link px-2 text-body-secondary">Company Sign Up</a></li>
          <li class="nav-item"><a href="/login" class="nav-link px-2 text-body-secondary">Log in</a></li>
        </ul>
      </footer>
    </div>

    <!--JS for Password Policy-->
    <script>
      // Function to toggle password visibility
      document.getElementById('togglePassword').addEventListener('click', function () {
        const passwordInput = document.getElementById('password');
        const icon = this.querySelector('i');
  
        if (passwordInput.type === 'password') {
          passwordInput.type = 'text';
          icon.classList.remove('fa-eye');
          icon.classList.add('fa-eye-slash');
        } else {
          passwordInput.type = 'password';
          icon.classList.remove('fa-eye-slash');
          icon.classList.add('fa-eye');
        }
      });
      
      document.getElementById('toggleConfirmPassword').addEventListener('click', function () {
        const confirmPasswordInput = document.getElementById('confirmPassword');
        const icon = this.querySelector('i');
  
        if (confirmPasswordInput.type === 'password') {
          confirmPasswordInput.type = 'text';
          icon.classList.remove('fa-eye');
          icon.classList.add('fa-eye-slash');
        } else {
          confirmPasswordInput.type = 'password';
          icon.classList.remove('fa-eye-slash');
          icon.classList.add('fa-eye');
        }
      });
  
      //Password Policy Check
      function validatePassword(password, confirmPassword) {
        const strongPasswordRegex = /^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)(?=.*[@$!%*?&])[A-Za-z\d@$!%*?&]{8,}$/;
        const errorMessage = document.getElementById('errorMessage');

        // Check each condition and update the corresponding label
        const minLengthCheck = password.length >= 8;
        const uppercaseCheck = /[A-Z]/.test(password);
        const lowercaseCheck = /[a-z]/.test(password);
        const symbolCheck = /[@$!%*?&]/.test(password);
        const matchCheck = password === confirmPassword && password !== '' && confirmPassword !== '';

        document.getElementById('minLength').innerHTML = minLengthCheck ?
          '<i class="fas fa-check text-success"></i> Minimum 8 characters' :
          '<i class="fas fa-times text-danger"></i> Minimum 8 characters';
        document.getElementById('uppercase').innerHTML = uppercaseCheck ?
          '<i class="fas fa-check text-success"></i> At least one uppercase letter' :
          '<i class="fas fa-times text-danger"></i> At least one uppercase letter';
        document.getElementById('lowercase').innerHTML = lowercaseCheck ?
          '<i class="fas fa-check text-success"></i> At least one lowercase letter' :
          '<i class="fas fa-times text-danger"></i> At least one lowercase letter';
        document.getElementById('symbol').innerHTML = symbolCheck ?
          '<i class="fas fa-check text-success"></i> At least one symbol (@$!%*?&)' :
          '<i class="fas fa-times text-danger"></i> At least one symbol (@$!%*?&)';
        document.getElementById('match').innerHTML = matchCheck ?
          '<i class="fas fa-check text-success"></i> Match with Confirm Password' :
          '<i class="fas fa-times text-danger"></i> Match with Confirm Password';

        // Check overall validity and update the error message
        if (strongPasswordRegex.test(password) && matchCheck) {
          errorMessage.textContent = 'Strong Password';
          errorMessage.classList.remove('text-danger');
          errorMessage.classList.add('text-success');
          return true; // Return true if password is strong
        } else if (!minLengthCheck || !uppercaseCheck || !lowercaseCheck || !symbolCheck) {
          errorMessage.textContent = 'Weak Password';
          errorMessage.classList.remove('text-success');
          errorMessage.classList.add('text-danger');
          return false; // Return false if password is weak
        } else {
          errorMessage.textContent = 'Passwords do not Match';
          errorMessage.classList.remove('text-success');
          errorMessage.classList.add('text-danger');
          return false; // Return false if passwords do not match
        }
      }

      // Email validation function
      function validateEmail(email) {
        const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
        return emailRegex.test(email);
      }

      //Test
      document.getElementById('submitButton').addEventListener('click', function(event) {
        event.preventDefault(); // Prevent default button behavior

        //Conditions
        const fNameValue = document.getElementById('fName').value.trim();
        const lNameValue = document.getElementById('lName').value.trim();
        const emailValue = document.getElementById('email').value.trim();
        const CompCodeValue = document.getElementById('CompCode').value.trim();
        const passwordValue = document.getElementById('password').value.trim();
        const confirmPasswordValue = document.getElementById('confirmPassword').value.trim();

        // Check if all conditions are met
        if (fNameValue === ''){
          document.getElementById('fNameErr').style.display = 'block';
        } else {
          document.getElementById('fNameErr').style.display = 'none';
        }
        if (lNameValue === ''){
          document.getElementById('lNameErr').style.display = 'block';
        } else {
          document.getElementById('lNameErr').style.display = 'none';
        }
        if (!validateEmail(emailValue)){
          document.getElementById('emailErr').style.display = 'block'
        } else {
          document.getElementById('emailErr').style.display = 'none';
        }
        if (CompCodeValue === ''){
          document.getElementById('CompCodeErr').style.display = 'block';
        } else {
          document.getElementById('CompCodeErr').style.display = 'none';
        }
        if (!validatePassword(passwordValue, confirmPasswordValue)){
          document.getElementById('PassErr').style.display = 'block';
        } else {
          document.getElementById('PassErr').style.display = 'none';
        }
        if (fNameValue !== '' && lNameValue !== '' && validateEmail(emailValue) && CompCodeValue !== '' && validatePassword(passwordValue, confirmPasswordValue)) {
          // Condition is met, so submit the form
          document.getElementById('myForm').submit();
        }
      });
    </script>

    <!--Bootstrap Links-->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.8/dist/umd/popper.min.js" integrity="sha384-I7E8VVD/ismYTF4hNIPjVp/Zjvgyol6VFvRkX/vR+Vc4jQkC+hVqc2pM8ODewa9r" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.min.js" integrity="sha384-0pUGZvbkm6XF6gxjEnlmuGrJXVbNuzT9qBBavbLwCsOGabYfZo0T0to5eqruptLy" crossorigin="anonymous"></script>
    <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.bundle.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/js/all.min.js"></script>
  </body>
</html>